<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá M·∫∑t Tr·ªùi 3D - V≈® VƒÇN TRI·ªÜU</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            margin: 0;
            overflow: hidden;
            font-family: 'Arial', sans-serif;
            background: radial-gradient(circle at center, #0a0a2a 0%, #000000 80%);
            color: white;
        }
        
        canvas {
            display: block;
        }
        
        .ui-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            z-index: 100;
        }
        
        .title {
            font-size: 28px;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            background: linear-gradient(90deg, #ffd700, #ff8c00, #ff4500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        
        button {
            background: linear-gradient(45deg, #4a4a8a, #2c2c5c);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        
        button:hover {
            background: linear-gradient(45deg, #5a5aaa, #3c3c7c);
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.4);
        }
        
        .sun-hint {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            padding: 20px 30px;
            border-radius: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 2px solid #ffd700;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
            z-index: 200;
            max-width: 500px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.5); }
            50% { box-shadow: 0 0 40px rgba(255, 215, 0, 0.8); }
            100% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.5); }
        }
        
        .sun-hint h3 {
            color: #ffd700;
            margin-bottom: 15px;
            font-size: 24px;
        }
        
        .sun-hint p {
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .close-hint {
            background: #ffd700;
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .close-hint:hover {
            background: #ffcc00;
            transform: scale(1.05);
        }
        
        .instructions {
            position: absolute;
            top: 80px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 10px;
            font-size: 14px;
            max-width: 300px;
            backdrop-filter: blur(10px);
        }
        
        .instructions b {
            color: #ffd700;
        }
        
        .planet-info {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            padding: 15px 25px;
            border-radius: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
            opacity: 0;
            transition: opacity 0.3s ease;
            max-width: 600px;
            pointer-events: none;
        }
        
        .planet-info.visible {
            opacity: 1;
        }
        
        .planet-name {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 8px;
            color: #ffd700;
        }
        
        .planet-desc {
            font-size: 16px;
            line-height: 1.5;
        }
        
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 1000;
        }
        
        .loading-text {
            font-size: 24px;
            margin-top: 20px;
            color: #ffd700;
        }
        
        .spinner {
            width: 70px;
            height: 70px;
            border: 5px solid rgba(255, 215, 0, 0.3);
            border-radius: 50%;
            border-top-color: #ffd700;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .hidden {
            display: none;
        }
        
        .mars-hint {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            border: 2px solid #cd5c5c;
            box-shadow: 0 0 20px rgba(205, 92, 92, 0.5);
            max-width: 300px;
            animation: marsPulse 3s infinite;
        }
        
        @keyframes marsPulse {
            0% { box-shadow: 0 0 15px rgba(205, 92, 92, 0.5); }
            50% { box-shadow: 0 0 25px rgba(205, 92, 92, 0.8); }
            100% { box-shadow: 0 0 15px rgba(205, 92, 92, 0.5); }
        }
        
        .mars-hint b {
            color: #cd5c5c;
        }

        .cursor-hint {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 100;
        }
        
        .new-feature-hint {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            border: 2px solid #00bfff;
            box-shadow: 0 0 20px rgba(0, 191, 255, 0.5);
            max-width: 300px;
            animation: newFeaturePulse 3s infinite;
        }
        
        @keyframes newFeaturePulse {
            0% { box-shadow: 0 0 15px rgba(0, 191, 255, 0.5); }
            50% { box-shadow: 0 0 25px rgba(0, 191, 255, 0.8); }
            100% { box-shadow: 0 0 15px rgba(0, 191, 255, 0.5); }
        }
        
        .new-feature-hint b {
            color: #00bfff;
        }
    </style>
</head>
<body>
    <div class="loading">
        <div class="spinner"></div>
        <div class="loading-text">ƒêang t·∫£i h·ªá m·∫∑t tr·ªùi...</div>
    </div>

    <div class="sun-hint" id="sunHint">
        <h3>üåü Kh√°m ph√° H·ªá M·∫∑t Tr·ªùi üåü</h3>
        <p>Click v√†o <strong>M·∫∑t Tr·ªùi</strong> ƒë·ªÉ truy c·∫≠p trang ch·ªß c·ªßa <strong>V≈® VƒÇN TRI·ªÜU</strong>!</p>
        <p>Click v√†o <strong style="color: #cd5c5c;">Sao H·ªèa</strong> ƒë·ªÉ xem c√°c ƒë·ªì √°n!</p>
        <p>Click v√†o <strong style="color: #00bfff;">Sao Th·ªßy</strong> ƒë·ªÉ xem th√¥ng tin v·ªÅ t√¥i!</p>
        <p>Click v√†o <strong style="color: #9370db;">Sao Thi√™n V∆∞∆°ng</strong> ƒë·ªÉ xem k·ªπ nƒÉng!</p>
        <p>Click v√†o <strong style="color: #20b2aa;">Sao H·∫£i V∆∞∆°ng</strong> ƒë·ªÉ xem kinh nghi·ªám!</p>
        <button class="close-hint" onclick="document.getElementById('sunHint').classList.add('hidden')">B·∫Øt ƒë·∫ßu kh√°m ph√°</button>
    </div>

    <div class="mars-hint" id="marsHint">
        <p><b>üí° M·∫πo:</b> Click v√†o <b style="color: #cd5c5c;">Sao H·ªèa</b> (h√†nh tinh ƒë·ªè) ƒë·ªÉ xem trang ƒë·ªì √°n 3D!</p>
    </div>
    
    <div class="new-feature-hint" id="newFeatureHint">
        <p><b>üÜï T√≠nh nƒÉng m·ªõi:</b> S·ª≠ d·ª•ng n√∫t <b style="color: #00bfff;">G√≥c Nh√¨n M·∫∑c ƒê·ªãnh</b> ƒë·ªÉ quay v·ªÅ g√≥c nh√¨n ban ƒë·∫ßu!</p>
    </div>

    <div class="ui-container">
        <div class="title">H·ªÜ M·∫∂T TR·ªúI 3D - V≈® VƒÇN TRI·ªÜU</div>
        <div class="controls">
            <button id="speedDown">Gi·∫£m T·ªëc ƒê·ªô</button>
            <button id="toggleMotion">T·∫°m D·ª´ng</button>
            <button id="speedUp">TƒÉng T·ªëc ƒê·ªô</button>
            <button id="resetView">G√≥c Nh√¨n M·∫∑c ƒê·ªãnh</button>
        </div>
    </div>

    <div class="planet-info">
        <div class="planet-name">M·∫∑t Tr·ªùi</div>
        <div class="planet-desc">Ng√¥i sao ·ªü trung t√¢m h·ªá M·∫∑t Tr·ªùi, chi·∫øm 99.86% kh·ªëi l∆∞·ª£ng c·ªßa to√†n h·ªá. Click ƒë·ªÉ v√†o trang ch·ªß c·ªßa V≈® VƒÇN TRI·ªÜU!</div>
    </div>

    <div class="instructions">
        <b>H∆∞·ªõng d·∫´n:</b><br>
        - K√©o chu·ªôt ƒë·ªÉ xoay g√≥c nh√¨n<br>
        - Cu·ªôn chu·ªôt ƒë·ªÉ ph√≥ng to/thu nh·ªè<br>
        - <b>Di chu·ªôt v√†o h√†nh tinh ƒë·ªÉ xem th√¥ng tin</b><br>
        - <b>Click v√†o M·∫∑t Tr·ªùi ƒë·ªÉ v√†o trang ch·ªß</b><br>
        - <b style="color: #cd5c5c;">Click v√†o Sao H·ªèa ƒë·ªÉ xem ƒë·ªì √°n</b><br>
        - <b style="color: #00bfff;">Click v√†o Sao Th·ªßy ƒë·ªÉ xem th√¥ng tin v·ªÅ t√¥i</b><br>
        - <b style="color: #9370db;">Click v√†o Sao Thi√™n V∆∞∆°ng ƒë·ªÉ xem k·ªπ nƒÉng</b><br>
        - <b style="color: #20b2aa;">Click v√†o Sao H·∫£i V∆∞∆°ng ƒë·ªÉ xem kinh nghi·ªám</b>
    </div>

    <div class="cursor-hint" id="cursorHint"></div>

    <script>
        // ƒê·ª£i t·∫£i trang
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.querySelector('.loading').style.display = 'none';
                init();
            }, 1500);
        });

        function init() {
            // Thi·∫øt l·∫≠p scene, camera, renderer
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            document.body.appendChild(renderer.domElement);

            // Thi·∫øt l·∫≠p ƒëi·ªÅu khi·ªÉn chu·ªôt
            let isDragging = false;
            let previousMousePosition = {
                x: 0,
                y: 0
            };
            let rotationSpeed = 0.005;
            let cameraDistance = 50;
            let cameraRotationX = 0;
            let cameraRotationY = 0;
            
            // L∆∞u g√≥c nh√¨n m·∫∑c ƒë·ªãnh
            const defaultCameraDistance = 50;
            const defaultCameraRotationX = 0;
            const defaultCameraRotationY = 0;

            // Tham chi·∫øu ƒë·∫øn ph·∫ßn t·ª≠ hi·ªÉn th·ªã th√¥ng tin
            const planetInfo = document.querySelector('.planet-info');
            const planetName = document.querySelector('.planet-name');
            const planetDesc = document.querySelector('.planet-desc');
            const cursorHint = document.getElementById('cursorHint');

            // X·ª≠ l√Ω s·ª± ki·ªán chu·ªôt
            renderer.domElement.addEventListener('mousedown', (e) => {
                isDragging = true;
            });

            renderer.domElement.addEventListener('mousemove', (e) => {
                const mouse = new THREE.Vector2();
                mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
                mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;

                const raycaster = new THREE.Raycaster();
                raycaster.setFromCamera(mouse, camera);

                // Ki·ªÉm tra xem c√≥ di chu·ªôt v√†o M·∫∑t Tr·ªùi kh√¥ng
                const sunIntersects = raycaster.intersectObject(sun);
                if (sunIntersects.length > 0) {
                    planetName.textContent = "M·∫∑t Tr·ªùi";
                    planetDesc.textContent = "Ng√¥i sao ·ªü trung t√¢m h·ªá M·∫∑t Tr·ªùi. Click ƒë·ªÉ v√†o trang ch·ªß!";
                    planetInfo.classList.add('visible');
                    cursorHint.textContent = "Click ƒë·ªÉ v√†o trang ch·ªß";
                    cursorHint.style.opacity = "1";
                    cursorHint.style.left = e.pageX + 15 + 'px';
                    cursorHint.style.top = e.pageY + 15 + 'px';
                    return;
                }

                // Ki·ªÉm tra xem c√≥ di chu·ªôt v√†o h√†nh tinh kh√¥ng
                const intersects = raycaster.intersectObjects(planetMeshes.map(p => p.mesh));
                if (intersects.length > 0) {
                    const planet = intersects[0].object;
                    planetName.textContent = planet.userData.planetName;
                    planetDesc.textContent = planet.userData.planetInfo;
                    planetInfo.classList.add('visible');
                    
                    // Hi·ªÉn th·ªã g·ª£i √Ω cho c√°c h√†nh tinh c√≥ li√™n k·∫øt
                    if (planet.userData.link) {
                        let hintText = "";
                        if (planet.userData.planetName === 'Mars') {
                            hintText = "Click ƒë·ªÉ xem ƒë·ªì √°n";
                        } else if (planet.userData.planetName === 'Mercury') {
                            hintText = "Click ƒë·ªÉ xem th√¥ng tin v·ªÅ t√¥i";
                        } else if (planet.userData.planetName === 'Uranus') {
                            hintText = "Click ƒë·ªÉ xem k·ªπ nƒÉng";
                        } else if (planet.userData.planetName === 'Neptune') {
                            hintText = "Click ƒë·ªÉ xem kinh nghi·ªám";
                        }
                        
                        cursorHint.textContent = hintText;
                        cursorHint.style.opacity = "1";
                        cursorHint.style.left = e.pageX + 15 + 'px';
                        cursorHint.style.top = e.pageY + 15 + 'px';
                    } else {
                        cursorHint.style.opacity = "0";
                    }
                } else {
                    planetInfo.classList.remove('visible');
                    cursorHint.style.opacity = "0";
                }

                if (isDragging) {
                    const deltaMove = {
                        x: e.clientX - previousMousePosition.x,
                        y: e.clientY - previousMousePosition.y
                    };

                    cameraRotationY += deltaMove.x * rotationSpeed;
                    cameraRotationX += deltaMove.y * rotationSpeed;

                    // Gi·ªõi h·∫°n g√≥c nh√¨n theo tr·ª•c X
                    cameraRotationX = Math.max(-Math.PI/2, Math.min(Math.PI/2, cameraRotationX));
                }
                
                previousMousePosition = {
                    x: e.clientX,
                    y: e.clientY
                };
            });

            renderer.domElement.addEventListener('mouseup', () => {
                isDragging = false;
            });

            renderer.domElement.addEventListener('wheel', (e) => {
                e.preventDefault();
                cameraDistance += e.deltaY * 0.01;
                cameraDistance = Math.max(30, Math.min(100, cameraDistance));
            });

            // √Ånh s√°ng
            const pointLight = new THREE.PointLight(0xffffff, 2, 1000);
            pointLight.position.set(0, 0, 0);
            scene.add(pointLight);
            
            const ambientLight = new THREE.AmbientLight(0x404040, 0.3);
            scene.add(ambientLight);

            // T·∫°o hi·ªáu ·ª©ng √°nh s√°ng cho M·∫∑t Tr·ªùi
            const sunLight = new THREE.PointLight(0xffd700, 1.5, 200);
            sunLight.position.set(0, 0, 0);
            scene.add(sunLight);

            // M·∫∑t tr·ªùi
            const sunGeometry = new THREE.SphereGeometry(8, 32, 32);
            const sunMaterial = new THREE.MeshBasicMaterial({
                color: 0xffd700,
                map: (() => {
                    const canvas = document.createElement('canvas');
                    canvas.width = 512;
                    canvas.height = 512;
                    const context = canvas.getContext('2d');
                    
                    // T·∫°o gradient cho m·∫∑t tr·ªùi
                    const gradient = context.createRadialGradient(256, 256, 0, 256, 256, 256);
                    gradient.addColorStop(0, '#ffd700');
                    gradient.addColorStop(0.5, '#ff8c00');
                    gradient.addColorStop(1, '#ff4500');
                    
                    context.fillStyle = gradient;
                    context.fillRect(0, 0, 512, 512);
                    
                    // Th√™m m·ªôt s·ªë chi ti·∫øt ng·∫´u nhi√™n
                    context.globalCompositeOperation = 'overlay';
                    for (let i = 0; i < 1000; i++) {
                        const x = Math.random() * 512;
                        const y = Math.random() * 512;
                        const radius = Math.random() * 3;
                        const brightness = Math.random() * 100 + 155;
                        context.fillStyle = `rgb(${brightness}, ${brightness-50}, 0)`;
                        context.beginPath();
                        context.arc(x, y, radius, 0, Math.PI * 2);
                        context.fill();
                    }
                    
                    return new THREE.CanvasTexture(canvas);
                })()
            });
            const sun = new THREE.Mesh(sunGeometry, sunMaterial);
            sun.userData = { 
                isSun: true,
                info: 'Click ƒë·ªÉ truy c·∫≠p trang ch·ªß c·ªßa V≈® VƒÇN TRI·ªÜU!',
                name: 'TRANG CH·ª¶'
            };
            scene.add(sun);

            // Th√™m hi·ªáu ·ª©ng corona cho M·∫∑t Tr·ªùi
            const coronaGeometry = new THREE.SphereGeometry(8.5, 32, 32);
            const coronaMaterial = new THREE.MeshBasicMaterial({
                color: 0xff4500,
                transparent: true,
                opacity: 0.3
            });
            const corona = new THREE.Mesh(coronaGeometry, coronaMaterial);
            scene.add(corona);

            // H√†nh tinh
            const planets = [
                {
                    name: 'Mercury',
                    radius: 1.5,
                    distance: 15,
                    speed: 0.02,
                    color: 0x00bfff, // M√†u xanh d∆∞∆°ng s√°ng
                    info: 'H√†nh tinh g·∫ßn M·∫∑t Tr·ªùi nh·∫•t. Click ƒë·ªÉ xem th√¥ng tin v·ªÅ V≈® VƒÇN TRI·ªÜU!',
                    link: 'thongtincanhan.html' // Trang th√¥ng tin c√° nh√¢n
                },
                {
                    name: 'Venus',
                    radius: 2.2,
                    distance: 20,
                    speed: 0.015,
                    color: 0xf4a460,
                    info: 'H√†nh tinh n√≥ng nh·∫•t v·ªõi nhi·ªát ƒë·ªô b·ªÅ m·∫∑t l√™n ƒë·∫øn 462¬∞C, c√≥ b·∫ßu kh√≠ quy·ªÉn d√†y ƒë·∫∑c ch·ª©a ƒë·∫ßy kh√≠ CO2.'
                },
                {
                    name: 'Earth',
                    radius: 2.5,
                    distance: 25,
                    speed: 0.01,
                    color: 0x1e90ff,
                    info: 'H√†nh tinh duy nh·∫•t ƒë∆∞·ª£c bi·∫øt ƒë·∫øn c√≥ s·ª± s·ªëng, c√≥ m·ªôt m·∫∑t trƒÉng t·ª± nhi√™n, 71% b·ªÅ m·∫∑t l√† n∆∞·ªõc.'
                },
                {
                    name: 'Mars',
                    radius: 2.0,
                    distance: 30,
                    speed: 0.008,
                    color: 0xcd5c5c,
                    info: 'H√†nh tinh ƒë·ªè v·ªõi b·ªÅ m·∫∑t nhi·ªÅu b·ª•i v√† ƒë√°. Click ƒë·ªÉ xem c√°c ƒë·ªì √°n c·ªßa V≈® VƒÇN TRI·ªÜU!',
                    link: 'doancanhan.html' // Trang ƒë·ªì √°n 3D
                },
                {
                    name: 'Jupiter',
                    radius: 5.0,
                    distance: 40,
                    speed: 0.005,
                    color: 0xd8ca9d,
                    info: 'H√†nh tinh l·ªõn nh·∫•t trong h·ªá M·∫∑t Tr·ªùi, l√† h√†nh tinh kh√≠ kh·ªïng l·ªì v·ªõi V·∫øt ƒê·ªè L·ªõn - m·ªôt c∆°n b√£o kh·ªïng l·ªì.'
                },
                {
                    name: 'Saturn',
                    radius: 4.5,
                    distance: 50,
                    speed: 0.004,
                    color: 0xf0e6a2,
                    info: 'H√†nh tinh ƒë∆∞·ª£c bi·∫øt ƒë·∫øn v·ªõi h·ªá v√†nh ƒëai r·ªông l·ªõn g·ªìm bƒÉng, ƒë√° v√† b·ª•i, c√≥ h∆°n 80 m·∫∑t trƒÉng.'
                },
                {
                    name: 'Uranus',
                    radius: 3.5,
                    distance: 60,
                    speed: 0.003,
                    color: 0x9370db, // M√†u t√≠m
                    info: 'H√†nh tinh kh√≠ kh·ªïng l·ªì v·ªõi tr·ª•c nghi√™ng g·∫ßn 90 ƒë·ªô. Click ƒë·ªÉ xem c√°c k·ªπ nƒÉng c·ªßa V≈® VƒÇN TRI·ªÜU!',
                    link: 'kynang.html' // Trang k·ªπ nƒÉng
                },
                {
                    name: 'Neptune',
                    radius: 3.5,
                    distance: 70,
                    speed: 0.002,
                    color: 0x20b2aa, // M√†u xanh bi·ªÉn s√°ng
                    info: 'H√†nh tinh xa nh·∫•t trong h·ªá M·∫∑t Tr·ªùi. Click ƒë·ªÉ xem kinh nghi·ªám l√†m vi·ªác c·ªßa V≈® VƒÇN TRI·ªÜU!',
                    link: 'kinhnghiem.html' // Trang kinh nghi·ªám
                }
            ];

            const planetMeshes = [];
            const orbitCurves = [];

            // T·∫°o h√†nh tinh v√† qu·ªπ ƒë·∫°o
            planets.forEach(planet => {
                // H√†nh tinh
                const geometry = new THREE.SphereGeometry(planet.radius, 32, 32);
                const material = new THREE.MeshStandardMaterial({
                    color: planet.color,
                    roughness: 0.8,
                    metalness: 0.1
                });
                
                const mesh = new THREE.Mesh(geometry, material);
                mesh.position.x = planet.distance;
                mesh.userData = { 
                    planetInfo: planet.info, 
                    planetName: planet.name,
                    isPlanet: true,
                    link: planet.link || null
                };
                scene.add(mesh);
                
                planetMeshes.push({ 
                    mesh, 
                    distance: planet.distance, 
                    speed: planet.speed, 
                    spin: 0.02,
                    angle: Math.random() * Math.PI * 2 // G√≥c ng·∫´u nhi√™n ban ƒë·∫ßu
                });

                // Qu·ªπ ƒë·∫°o (v√≤ng d√¢y)
                const curve = new THREE.EllipseCurve(
                    0, 0,
                    planet.distance, planet.distance * 0.6, // Elip: height = 60% width
                    0, 2 * Math.PI,
                    false,
                    0
                );
                const points = curve.getPoints(100);
                const orbitGeometry = new THREE.BufferGeometry().setFromPoints(points);
                const orbitMaterial = new THREE.LineDashedMaterial({
                    color: 0xffffff,
                    dashSize: 0.5,
                    gapSize: 0.5,
                    opacity: 0.3,
                    transparent: true
                });
                const orbit = new THREE.Line(orbitGeometry, orbitMaterial);
                orbit.computeLineDistances();
                orbit.rotation.x = Math.PI / 6; // Nghi√™ng qu·ªπ ƒë·∫°o 30 ƒë·ªô
                scene.add(orbit);
                orbitCurves.push(orbit);
            });

            // Ng√¥i sao n·ªÅn
            const starGeometry = new THREE.BufferGeometry();
            const starVertices = [];
            for (let i = 0; i < 5000; i++) {
                const x = (Math.random() - 0.5) * 2000;
                const y = (Math.random() - 0.5) * 2000;
                const z = (Math.random() - 0.5) * 2000;
                starVertices.push(x, y, z);
            }
            starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
            const starMaterial = new THREE.PointsMaterial({ 
                color: 0xffffff, 
                size: 1.5, 
                sizeAttenuation: true,
                transparent: true,
                opacity: 0.8
            });
            const stars = new THREE.Points(starGeometry, starMaterial);
            scene.add(stars);

            // Camera
            camera.position.set(0, 25, 50);
            camera.lookAt(0, 0, 0);

            // Bi·∫øn ƒëi·ªÅu khi·ªÉn
            let animationSpeed = 1;
            let isAnimating = true;

            // X·ª≠ l√Ω s·ª± ki·ªán click tr√™n h√†nh tinh
            renderer.domElement.addEventListener('click', (event) => {
                const mouse = new THREE.Vector2();
                mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
                mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

                const raycaster = new THREE.Raycaster();
                raycaster.setFromCamera(mouse, camera);

                // Ki·ªÉm tra xem c√≥ click v√†o M·∫∑t Tr·ªùi kh√¥ng
                const sunIntersects = raycaster.intersectObject(sun);
                
                if (sunIntersects.length > 0) {
                    // Click v√†o M·∫∑t Tr·ªùi - chuy·ªÉn h∆∞·ªõng ƒë·∫øn trang ch·ªß
                    window.location.href = 'trangchu.html';
                    return;
                }

                // Ki·ªÉm tra xem c√≥ click v√†o h√†nh tinh kh√¥ng
                const intersects = raycaster.intersectObjects(planetMeshes.map(p => p.mesh));
                
                if (intersects.length > 0) {
                    const planet = intersects[0].object;
                    
                    // N·∫øu h√†nh tinh c√≥ li√™n k·∫øt
                    if (planet.userData.link) {
                        window.location.href = planet.userData.link;
                        return;
                    }
                }
            });

            // X·ª≠ l√Ω n√∫t ƒëi·ªÅu khi·ªÉn
            document.getElementById('speedDown').addEventListener('click', () => {
                animationSpeed = Math.max(0.1, animationSpeed - 0.5);
            });

            document.getElementById('speedUp').addEventListener('click', () => {
                animationSpeed = Math.min(5, animationSpeed + 0.5);
            });

            document.getElementById('toggleMotion').addEventListener('click', () => {
                isAnimating = !isAnimating;
                document.getElementById('toggleMotion').textContent = isAnimating ? 'T·∫°m D·ª´ng' : 'Ti·∫øp T·ª•c';
            });
            
            // N√∫t quay v·ªÅ g√≥c nh√¨n m·∫∑c ƒë·ªãnh
            document.getElementById('resetView').addEventListener('click', () => {
                cameraDistance = defaultCameraDistance;
                cameraRotationX = defaultCameraRotationX;
                cameraRotationY = defaultCameraRotationY;
            });

            // Animation
            function animate() {
                requestAnimationFrame(animate);

                if (isAnimating) {
                    // Xoay h√†nh tinh quanh m·∫∑t tr·ªùi v√† t·ª± quay
                    planetMeshes.forEach((planet) => {
                        planet.angle += planet.speed * animationSpeed * 0.01;
                        planet.mesh.position.x = planet.distance * Math.cos(planet.angle);
                        planet.mesh.position.z = planet.distance * 0.6 * Math.sin(planet.angle); // Elip
                        planet.mesh.rotation.y += planet.spin * animationSpeed * 0.01; // T·ª± quay
                    });

                    // Xoay m·∫∑t tr·ªùi
                    sun.rotation.y += 0.005 * animationSpeed;
                    corona.rotation.y += 0.002 * animationSpeed;
                }

                // C·∫≠p nh·∫≠t v·ªã tr√≠ camera
                camera.position.x = cameraDistance * Math.sin(cameraRotationY) * Math.cos(cameraRotationX);
                camera.position.y = cameraDistance * Math.sin(cameraRotationX);
                camera.position.z = cameraDistance * Math.cos(cameraRotationY) * Math.cos(cameraRotationX);
                camera.lookAt(0, 0, 0);

                renderer.render(scene, camera);
            }
            animate();

            // X·ª≠ l√Ω resize c·ª≠a s·ªï
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        }
    </script>
</body>
</html>